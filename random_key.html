<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Random JSON Code</title>
  <script>
    // Fungsi acak
    function randInt(max){
      const arr = new Uint32Array(1);
      crypto.getRandomValues(arr);
      return arr[0] % max;
    }

    function buildCharset(cs){
      const lower='abcdefghijklmnopqrstuvwxyz';
      const upper='ABCDEFGHIJKLMNOPQRSTUVWXYZ';
      const digits='0123456789';
      return cs ? lower+upper+digits : lower+digits;
    }

    function generate(len, cs){
      const charset = buildCharset(cs);
      let out='';
      for(let i=0;i<len;i++) out += charset[randInt(charset.length)];
      return out;
    }

    function parseBool(v){
      if(v===null) return null;
      v = v.toLowerCase();
      if(['true','1','yes'].includes(v)) return true;
      if(['false','0','no'].includes(v)) return false;
      return null;
    }

    function readParams(){
      const q = new URLSearchParams(location.search);
      const digitRaw = q.get('digit');
      const csRaw = q.get('case_sensitive') ?? q.get('case') ?? q.get('case-sensitive');
      const digit = (digitRaw && !isNaN(parseInt(digitRaw))) ? Math.max(1, Math.min(10000, parseInt(digitRaw))) : 8;
      const cs = parseBool(csRaw) ?? false;
      return { digit, cs };
    }

    function outputJSON(){
      const { digit, cs } = readParams();
      const code = generate(digit, cs);
      const json = JSON.stringify({ code }, null, 0);
      // Set document content to JSON
      document.body.innerText = json;
      document.title = code;
    }

    // Jalankan langsung
    outputJSON();
  </script>
  <style>
    body{
      background:#fff;
      color:#000;
      font-family:monospace;
      white-space:pre;
      font-size:16px;
      margin:0;
      padding:1em;
    }
  </style>
</head>
<body></body>
</html>
